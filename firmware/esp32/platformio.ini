; ============================================================================
;  PlatformIO config — FLLC Wardriver v3
;
;  Build:    pio run
;  Upload:   pio run -t upload
;  Monitor:  pio device monitor -b 115200
; ============================================================================

[env:esp32dev]
platform          = espressif32@^6.4.0
board             = esp32dev
framework         = arduino

; ── CPU / Memory ──────────────────────────────────────────────────────────
board_build.f_cpu    = 240000000L
board_build.f_flash  = 80000000L
board_build.flash_mode = dio

; Huge APP partition — 3 MB app, 1 MB SPIFFS (we use SD so SPIFFS is spare)
board_build.partitions = huge_app.csv

; ── Compiler flags ────────────────────────────────────────────────────────
build_flags =
  -DCORE_DEBUG_LEVEL=0          ; suppress ESP-IDF debug spam
  -DARDUINO_RUNNING_CORE=1      ; main loop on Core 1
  -DARDUINO_EVENT_RUNNING_CORE=0
  -DBOARD_HAS_PSRAM=0
  -std=gnu++17
  -Os                           ; optimize for size
  -Wall

build_unflags = -std=gnu++11

; ── Upload ────────────────────────────────────────────────────────────────
upload_speed      = 921600
upload_port       = auto           ; auto-detect COM/ttyUSB
monitor_speed     = 115200

; ── Library dependencies ──────────────────────────────────────────────────
lib_deps =
  ; All libraries used are part of the ESP32 Arduino core — no external deps
  ; SD, SPI, WiFi, BLE, WebServer, DNSServer, FreeRTOS are built-in

; ── Extra config ──────────────────────────────────────────────────────────
monitor_filters = direct, esp32_exception_decoder
check_tool      = cppcheck
